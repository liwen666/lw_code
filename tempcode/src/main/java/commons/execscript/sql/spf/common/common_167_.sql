declare
V_RET  varchar2(4000);
BEGIN

--一、代码表设置
--创建代码表
execute immediate Q'{CREATE OR REPLACE VIEW CODE_T_PROJECTID_ININDEX AS
SELECT P.PROJECTID GUID,
       P.PROJCODE CODE,
       '【'||PROJCODE||'】'||P.PROJNAME NAME,
       '#' SUPERGUID,
       '1' ISLEAF,
       '1' LEVELNO
  FROM SPF_T_PBASEINFO P
  UNION ALL
  SELECT F.SPFID GUID,
       F.SPFCODE CODE,
       '【'||F.SPFCODE||'】'||F.SPFNAME NAME,
       '#' SUPERGUID,
       '1' ISLEAF,
       '1' LEVELNO
  FROM SPF_T_FBASEINFO F}';

FOR C_PAR IN (SELECT DISTRICTID,YEAR FROM PUB_T_PARTITION_DIVID WHERE YEAR <> '*') LOOP
    SELECT GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_SETPARM('',C_PAR.DISTRICTID,C_PAR.YEAR,'') INTO V_RET FROM DUAL;
    --修改dict_t_factor csid,showwidth
    UPDATE DICT_T_FACTOR  F  SET CSID='09B774215D424706B303ED8D30DB1125'  WHERE EXISTS(SELECT 1 FROM DICT_T_MODEL M WHERE M.TABLEID=F.TABLEID AND M.DBTABLENAME='EXP_T_PBUDGETTEMP' AND F.DBCOLUMNNAME='PROJECTID' );
    UPDATE DICT_T_FACTOR  F  SET SHOWWIDTH=300  WHERE EXISTS(SELECT 1 FROM DICT_T_MODEL M WHERE M.TABLEID=F.TABLEID AND M.DBTABLENAME='EXP_T_PBUDGETTEMP' AND F.DBCOLUMNNAME='PROJNAME' );

    --增加dict_t_modelcode
    delete from dict_t_modelcode where tableid='09B774215D424706B303ED8D30DB1125';
    insert into dict_t_modelcode (APPID, FASPCSID, DBTABLENAME, TABLEID, NAME, DYNAMICWHERE, ISLVL, ISFASP, ISORGID, ISREPBASE, ORDERID, SQLCON, STATUS, INSERTVERSION)
    values ('SPF', '09B774215D424706B303ED8D30DB1125', 'CODE_T_PROJECTID_ININDEX', '09B774215D424706B303ED8D30DB1125', '项目ID(预算编制项目选择专用)', null, '0', '0', '0', '0', 0, null, '1', sysdate);

    --增加dict_t_factorcode
    delete from dict_t_factorcode where tableid='09B774215D424706B303ED8D30DB1125';
    insert into dict_t_factorcode (BGTLVL, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, ISRESERVE, ISVISIBLE, NAME, ORDERID, SCALE, STATUS, TABLEID, INSERTVERSION)
    values (null, '59530594B67A400F820C80EBE90CC4B3', null, 1, 3, 'LEVELNO', null, null, '0', '0', 'LEVELNO', null, null, '1', '09B774215D424706B303ED8D30DB1125', sysdate);

    insert into dict_t_factorcode (BGTLVL, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, ISRESERVE, ISVISIBLE, NAME, ORDERID, SCALE, STATUS, TABLEID, INSERTVERSION)
    values (null, '9B94FDA2B87549CCB4B4BE7E3F228E80', null, 1, 3, 'SUPERGUID', null, null, '0', '0', 'SUPERGUID', null, null, '1', '09B774215D424706B303ED8D30DB1125',  sysdate);

    insert into dict_t_factorcode (BGTLVL, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, ISRESERVE, ISVISIBLE, NAME, ORDERID, SCALE, STATUS, TABLEID, INSERTVERSION)
    values (null, 'A0EA79EA38C244959D2AF6FDA513742B', null, 1, 3, 'ISLEAF', null, null, '0', '0', 'ISLEAF', null, null, '1', '09B774215D424706B303ED8D30DB1125', sysdate);

    insert into dict_t_factorcode (BGTLVL, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, ISRESERVE, ISVISIBLE, NAME, ORDERID, SCALE, STATUS, TABLEID, INSERTVERSION)
    values (null, 'BFCD433689414CF89BD2E06E174737C8', null, 32, 3, 'GUID', null, null, '0', '0', 'GUID', null, null, '1', '09B774215D424706B303ED8D30DB1125',  sysdate);

    insert into dict_t_factorcode (BGTLVL, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME,DEFAULTVALUE, DEID, ISRESERVE, ISVISIBLE, NAME, ORDERID, SCALE, STATUS, TABLEID, INSERTVERSION)
    values (null, 'C503967BC4D64AB9AB89951341A2025D', null, 150, 3, 'CODE', null, null, '0', '0', 'CODE', null, null, '1', '09B774215D424706B303ED8D30DB1125',sysdate);

    insert into dict_t_factorcode (BGTLVL, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME,DEFAULTVALUE, DEID, ISRESERVE, ISVISIBLE, NAME, ORDERID, SCALE, STATUS, TABLEID, INSERTVERSION)
    values (null, 'EA3B1C2A8B3341BAAA1F597DF24B3DAA', null, 354, 3, 'NAME', null, null, '0', '0', 'NAME', null, null, '1', '09B774215D424706B303ED8D30DB1125', sysdate);


    --二、分组设置
    delete from dict_t_setgroup where tableid='1076B3D87C3841D08DCC658EEB6A7BE0' ; 

    insert into dict_t_setgroup (BGTLVL, COLUMNID, GUID, IDSHOWCOL, ISASC, NAMESHOWCOL, ORDERID, STATUS, TABLEID)
    values (null, '0C62A29BB9A140819CD8DE8FFD540E53', '58912A42E4034A6E86E03213935E4A08', null, null, 'C5A39B18F70C440E83F248B944EC9B61', 1, '1', '1076B3D87C3841D08DCC658EEB6A7BE0');

    insert into dict_t_setgroup (BGTLVL, COLUMNID, GUID, IDSHOWCOL, ISASC, NAMESHOWCOL, ORDERID, STATUS, TABLEID)
    values (null, 'C4C7B39AB6264F18B95BB2297D7CB04B', '0BF5556A3852404CA9F1C83EE0781D8B', null, null, 'C5A39B18F70C440E83F248B944EC9B61', 2, '1', '1076B3D87C3841D08DCC658EEB6A7BE0');

    insert into dict_t_setgroup (BGTLVL, COLUMNID, GUID, IDSHOWCOL, ISASC, NAMESHOWCOL, ORDERID, STATUS, TABLEID)
    values (null, 'E96A55246DBE486A8A7FC1FEE8FCF0DE', 'C43138D14B9B4DDABE4D4BDF505E2A24', null, null, 'C5A39B18F70C440E83F248B944EC9B61', 3, '1', '1076B3D87C3841D08DCC658EEB6A7BE0');
END LOOP;
END;--预算编制选择项目时分组名称
