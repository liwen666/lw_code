BEGIN 
UPDATE P#DICT_T_MODELCODE 
SET DYNAMICWHERE = ' GUID IN( (SELECT GUID FROM Code_t_Agency_Spfdl START WITH GUID IN ( SELECT GUID FROM CODE_T_AGENCY_SPFDL B WHERE B.ISDISTRICT = ''0'' AND B.GUID IN( (SELECT GUID FROM CODE_T_AGENCY_SPFDL DL1 START WITH DL1.GUID IN (SELECT AGENCYID FROM SPF_T_FDECLAREAGENCY WHERE SPFID = (SELECT CASE WHEN((SELECT 1 FROM SPF_T_FBASEINFO FB WHERE FB.SPFID = ''$SPFID$'' AND FB.DISTRICTID = ''$DISTRICTID$'') = ''1'') THEN ''$SPFID$'' ELSE '''' END FROM DUAL) ) CONNECT BY PRIOR DL1.GUID = DL1.SUPERGUID) ) START WITH GUID =(( SELECT CASE WHEN ((SELECT W.USERTYPE FROM FASP_T_CAUSER W WHERE W.GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER'')) = ''1'') THEN (SELECT C.SUPERGUID FROM CODE_T_AGENCY_SPF C WHERE C.GUID = (SELECT W.UPAGENCYID FROM FASP_T_CAUSER W WHERE W.GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER''))) ELSE (SELECT W.UPAGENCYID FROM FASP_T_CAUSER W WHERE W.GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER'')) END FROM DUAL ) ) CONNECT BY PRIOR GUID = SUPERGUID ) CONNECT BY PRIOR  SUPERGUID = GUID) UNION ALL (SELECT GUID FROM CODE_T_DISTRICT_SPF CC WHERE CC.GUID IN(SELECT DS.GUID FROM CODE_T_DISTRICT_SPF DS START WITH DS.GUID IN(SELECT DISTRICTID FROM SPF_T_FDECLAREREGION WHERE SPFID = ''$SPFID$'') CONNECT BY PRIOR DS.GUID = DS.SUPERGUID ) START WITH CC.GUID IN (SELECT CASE WHEN (SUBSTR(CODE, LENGTH(CODE) - 1) = ''00'') THEN (SELECT GUID FROM CODE_T_DISTRICT_SPF WHERE GUID = B.SUPERGUID) ELSE GUID END DISTRICT FROM CODE_T_DISTRICT_SPF B WHERE GUID = (SELECT CASE WHEN (B.FIRAGENCYID = (SELECT UPAGENCYID FROM FASP_T_CAUSER W WHERE W.GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER''))) THEN ''$DISTRICTID$'' WHEN (B.FIRAGENCYID = (SELECT DIVISION FROM FASP_T_CAUSER W WHERE W.GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER''))) THEN ''$DISTRICTID$'' ELSE '''' END FROM SPF_T_FBASEINFO B WHERE SPFID = ''$SPFID$'') ) CONNECT BY PRIOR CC.GUID = CC.SUPERGUID ) ) ORDER BY CODE'
WHERE TABLEID ='223267AA7D472B22E050A8C021057ED5';
--修改一级项目审核视图
UPDATE P#DICT_T_FACTOR SET DBCOLUMNNAME ='PROJTYPENAME' WHERE DBCOLUMNNAME = 'SNAME_PROJTYPEID';
UPDATE P#DICT_T_FACTOR SET DBCOLUMNNAME ='DEPTNAME' WHERE DBCOLUMNNAME = 'SNAME_DEPTID';
END;
--代录代码表
