BEGIN
UPDATE P#DICT_T_MODELCODE
   SET DYNAMICWHERE = ' GUID IN (SELECT GUID FROM CODE_T_AGENCY_SPFDL START WITH GUID IN (SELECT GUID FROM CODE_T_AGENCY_SPFDL WHERE ((SELECT DISTRICTID FROM SPF_T_FBASEINFO WHERE SPFID = ''$SPFID$'') = (SELECT DISTRICTID FROM CODE_T_AGENCY_SPF WHERE GUID = (SELECT UPAGENCYID FROM SECU_T_USER WHERE GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER''))) AND GUID IN (SELECT GUID FROM CODE_T_AGENCY_SPF START WITH GUID IN (SELECT AGENCYID FROM SPF_T_FDECLAREAGENCY WHERE SPFID = ''$SPFID$'') CONNECT BY PRIOR GUID = SUPERGUID)) UNION ALL SELECT GUID FROM CODE_T_AGENCY_SPFDL WHERE ((SELECT DISTRICTID FROM SPF_T_FBASEINFO WHERE SPFID = ''$SPFID$'') <> (SELECT DISTRICTID FROM CODE_T_AGENCY_SPF WHERE GUID = (SELECT UPAGENCYID FROM SECU_T_USER WHERE GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER''))) AND ISDISTRICT = ''0'') UNION ALL SELECT GUID FROM CODE_T_AGENCY_SPFDL WHERE ((((SELECT FIRAGENCYID FROM SPF_T_FBASEINFO WHERE SPFID = ''$SPFID$'') = (SELECT UPAGENCYID FROM SECU_T_USER WHERE GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER'') AND ISDISTRICT = ''1'')) OR ((SELECT USERTYPE FROM SECU_T_USER WHERE GUID = GLOBAL_MULTYEAR_CZ.SECU_F_GLOBAL_PARM(''USER'')) = ''1'' AND ISDISTRICT = ''1'')) AND GUID IN (SELECT GUID FROM CODE_T_AGENCY_SPF START WITH GUID IN (SELECT DISTRICTID FROM SPF_T_FDECLAREREGION WHERE SPFID = ''$SPFID$'') CONNECT BY PRIOR GUID = SUPERGUID))) CONNECT BY PRIOR GUID = SUPERGUID) ORDER BY CODE'
 WHERE TABLEID = '223267AA7D472B22E050A8C021057ED5';
END;
--修改代录代码表
