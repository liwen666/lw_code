declare 
viewNumber number;
begin
  
  delete from  DICT_T_DEALTYPE where appid='SPF' and DEALID='TGSZRZB';
  insert into DICT_T_DEALTYPE (APPID, DEALID, DEALNAME, ORDERID, NEEDCONFIG, ISUNIQUE)
  values ('SPF', 'TGSZRZB', '专项托管设置日志表', 93, '0', '0');
  
  
  delete dict_t_defaultcol where DEALID='TGSZRZB';
  
  insert into dict_t_defaultcol (DEALID, ORDERID, NAME, DBCOLUMNNAME, DATATYPE, DATALENGTH, SCALE, CSID, ISPRIMARY, ISRESERVE, GUID, STATUS, DEFAULTVALUE, ISLOGICKEY, DEID, ISVISIBLE, ISUPDATE)
  values ('TGSZRZB', 1, '行标志', 'DATAKEY', 3, 32, null, null, '1', '1', 'E63C9D9533D04A5291DF9ADFBC3CC8AE', '1', 'sys_guid()', null, null, '0', '0');
  
  select count(1) into viewNumber from user_tables where table_NAME='P#SPF_T_CUSTODYLOG';
    if viewNumber > 0 then
  --删除专项托管日志表(特殊处理)
  EXECUTE IMMEDIATE Q'{
    drop table P#SPF_T_CUSTODYLOG
  }';
  END IF;
  
   --创建专项托管日志表
  EXECUTE IMMEDIATE Q'{
    create table P#SPF_T_CUSTODYLOG
      (
        status           CHAR(1) default '1' not null,
        dbversion        TIMESTAMP(6) default SYSDATE,
        datakey          VARCHAR2(32) default sys_guid() not null,
        cusrodydept      VARCHAR2(32),
        custodydeptid    VARCHAR2(32),
        oldcustdeptid    VARCHAR2(32),
        oldcustodydeptid VARCHAR2(32),
        creatdate        VARCHAR2(32),
        creatuser        VARCHAR2(32),
        districtid       VARCHAR2(32),
        spfid            VARCHAR2(32)
      )
  }';
  
   select count(1) into viewNumber from user_views where VIEW_NAME='SPF_T_CUSTODYLOG';
    if viewNumber > 0 then
    --删除  专项托管日志表物理视图
    EXECUTE IMMEDIATE Q'{
      drop view SPF_T_CUSTODYLOG
    }';
  end if;
  
  EXECUTE IMMEDIATE Q'{
    CREATE OR REPLACE VIEW SPF_T_CUSTODYLOG AS
      SELECT 
             STATUS,
             CUSRODYDEPT,
             OLDCUSTODYDEPTID,
             CREATDATE,
             DATAKEY,
             OLDCUSTDEPTID,
             CREATUSER,
             CUSTODYDEPTID,
             DISTRICTID,
             SPFID
        FROM P#SPF_T_CUSTODYLOG
       WHERE STATUS = '1'
  }';
  
  delete from p#dict_t_model where tableid ='E286223FAA4C40F7978FF7EE4F72C8A2';
  
  delete from p#dict_t_factor where tableid = 'E286223FAA4C40F7978FF7EE4F72C8A2';
    
  for v_row in (select * from pub_t_partition_divid t where t.year <> '*') loop
    
    insert into p#dict_t_model (YEAR, PROVINCE, TABLEID, APPID, DBTABLENAME, NAME, DEALTYPE, EXTPROP, INPUTLVL, ISADD, ISMAN, ISPARTITION, ISRESERVED, ISSHOW, ISTASK, ISSUMTAB, MAINUPTAB, ORDERID, RELATAB, REMARK, SECUSQL, BGTLVL, INITSQL, INITSQLTIME, SHORTTITLE, STATUS, SUITID, TABLETYPE, TABSWHERE, ISBAK, ISALLDISTRICT, ISALLYEAR, INITSQLBTNNAME, ISEXCELIMP, ISREADONLY, DESCFILE, ISSAVEFORMULA)
    values (v_row.YEAR, v_row.DISTRICTID, 'E286223FAA4C40F7978FF7EE4F72C8A2', 'SPF', 'SPF_T_CUSTODYLOG', '托管日志表', 'TGSZRZB', '0000000000000000000000000000000', '3', null, null, '1', null, '1', '0', '0', null, 1, null, null, null, null, null, '1', null, '1', '8288F140A88F4CCB8FF5BD9B4B28DCEF', '1', null, '0', '1', '1', null, '0', '0', null, '0');

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, null, null, null, null, null, null, '2ED40755055C45C6951185FDB28143D9', '14DA206175AB0A8FE050A8C021055537', 32, 6, 'CUSRODYDEPT', null, null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', 1, '主管部门(修改后)', '1', 7, null, null, null, '4', null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null);

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, null, null, null, null, null, null, '5A120FA9AEF64DA0927862AA18186D50', '14DADAE88B8B57D0E050A8C0210557DD', 32, 6, 'SPFID', null, null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', 1, '当前专项', '1', 5, null, null, null, '4', null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null);

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, '行标志', null, null, null, null, '行标志', '5DCBBD79151D4D08A9669C39A81C5CD8', null, 32, 3, 'DATAKEY', 'sys_guid()', null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '1', '0', '1', '0', '0', 1, '行标志', '1', 1, null, null, 0, null, null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null);

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, null, null, null, null, null, null, '70A7AD45BAD3405E8568300E082E8990', null, 32, 3, 'CREATUSER', null, null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', 1, '当前用户', '1', 3, null, null, 0, '0', null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null);

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, null, null, null, null, null, null, '713AEBD76C9544D68650891A59BEA018', '8FCC6B91BADC44E0BC73A2CC22CC9FBF', 32, 6, 'CUSTODYDEPTID', null, null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', 1, '归口处室(修改后)', '1', 9, null, null, null, '4', null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null);

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, null, null, null, null, null, null, 'A2487CF07B064E69A3D6D5FB65CAA6D1', null, 32, 3, 'CREATDATE', 'sysdate', null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', 1, '当前时间', '1', 4, null, null, 0, '0', null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null);

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, null, null, null, null, null, null, 'DA2C659CA9B8413FBEBBE03B71346C72', '8FCC6B91BADC44E0BC73A2CC22CC9FBF', 32, 6, 'OLDCUSTODYDEPTID', null, null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', 1, '老归口处室(修改前)', '1', 8, null, null, null, '4', null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null);

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, null, null, null, null, null, null, 'E54E9C46276648EC92CC0390F1E53F0F', 'B3161B73D098401D8B6F95BDACB1F484', 32, 6, 'DISTRICTID', null, null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', 1, '当前地区', '1', 2, null, null, null, '4', null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null);

    insert into p#dict_t_factor (YEAR, PROVINCE, ALIAS, BANDCOLUMNID, BANDREFDWCOL, BGTLVL, COLFORMAT, COLTIPS, COLUMNID, CSID, DATALENGTH, DATATYPE, DBCOLUMNNAME, DEFAULTVALUE, DEID, EXTPROP, FRMCOLID, FRMTABID, HREFLOC, HREFPARMID, ISBANDCOL, ISHREF, OPENWINDOWTYPE, ISKEY, ISLEAF, ISREGEX, ISRESERVE, ISSUM, ISUPDATE, ISVIRTUAL, ISVISIBLE, LEVELNO, NAME, NULLABLE, ORDERID, REGEXPR, REGEXPRINFO, SCALE, SHOWFORMAT, SHOWWIDTH, STATUS, SUPERID, TABLEID, VIRCONTEXT, PARENTNODECANCHECK, XLSXCOLUMNID)
    values (v_row.YEAR, v_row.DISTRICTID, null, null, null, null, null, null, 'F6CE9EF5539946A088178640BF330823', '14DA206175AB0A8FE050A8C021055537', 32, 6, 'OLDCUSTDEPTID', null, null, '0000000000000000000000000000000', null, null, null, null, '0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', 1, '主管部门(修改前)', '1', 6, null, null, null, '4', null, '1', '0', 'E286223FAA4C40F7978FF7EE4F72C8A2', null, '0', null); 
  end loop;
end;
--托管日志
